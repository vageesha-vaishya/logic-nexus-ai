import{j as u}from"./jsx-runtime-DF2Pcvd1.js";import{r as n}from"./index-B2-qRKKC.js";import{c as C,u as f}from"./index-DRfMV7qj.js";import{u as k}from"./index-ciuW_uyV.js";import{P as m}from"./index-BmZbFD_3.js";import{s as F}from"./index-CMMd_KE_.js";import{c as v}from"./utils-CytzSlOG.js";function M(){return F.useSyncExternalStore(P,()=>!0,()=>!1)}function P(){return()=>{}}var p="Avatar",[T]=C(p),[$,x]=T(p),L=n.forwardRef((a,e)=>{const{__scopeAvatar:r,...o}=a,[s,t]=n.useState("idle");return u.jsx($,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:t,children:u.jsx(m.span,{...o,ref:e})})});L.displayName=p;var S="AvatarImage",h=n.forwardRef((a,e)=>{const{__scopeAvatar:r,src:o,onLoadingStatusChange:s=()=>{},...t}=a,l=x(S,r),d=H(o,t),i=k(c=>{s(c),l.onImageLoadingStatusChange(c)});return f(()=>{d!=="idle"&&i(d)},[d,i]),d==="loaded"?u.jsx(m.img,{...t,ref:e,src:o}):null});h.displayName=S;var w="AvatarFallback",y=n.forwardRef((a,e)=>{const{__scopeAvatar:r,delayMs:o,...s}=a,t=x(w,r),[l,d]=n.useState(o===void 0);return n.useEffect(()=>{if(o!==void 0){const i=window.setTimeout(()=>d(!0),o);return()=>window.clearTimeout(i)}},[o]),l&&t.imageLoadingStatus!=="loaded"?u.jsx(m.span,{...s,ref:e}):null});y.displayName=w;function A(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function H(a,{referrerPolicy:e,crossOrigin:r}){const o=M(),s=n.useRef(null),t=o?(s.current||(s.current=new window.Image),s.current):null,[l,d]=n.useState(()=>A(t,a));return f(()=>{d(A(t,a))},[t,a]),f(()=>{const i=j=>()=>{d(j)};if(!t)return;const c=i("loaded"),g=i("error");return t.addEventListener("load",c),t.addEventListener("error",g),e&&(t.referrerPolicy=e),typeof r=="string"&&(t.crossOrigin=r),()=>{t.removeEventListener("load",c),t.removeEventListener("error",g)}},[t,r,e]),l}var E=L,I=h,N=y;const _=n.forwardRef(({className:a,...e},r)=>u.jsx(E,{ref:r,className:v("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e}));_.displayName=E.displayName;const R=n.forwardRef(({className:a,...e},r)=>u.jsx(I,{ref:r,className:v("aspect-square h-full w-full",a),...e}));R.displayName=I.displayName;const b=n.forwardRef(({className:a,...e},r)=>u.jsx(N,{ref:r,className:v("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));b.displayName=N.displayName;_.__docgenInfo={description:"",methods:[]};R.__docgenInfo={description:"",methods:[]};b.__docgenInfo={description:"",methods:[]};export{_ as A,R as a,b};
