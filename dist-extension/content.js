console.log("[Nexus Connect] Content script loaded");function d(){const t=document.querySelector("h2.hP"),s=t?t.textContent:document.title.split("-")[0].trim(),e=document.querySelector(".gD"),n=e?e.textContent:"Unknown Sender",c=e?e.getAttribute("email"):null,o=document.querySelector(".a3s.aiL"),i=o?o.textContent:"",l=window.location.hash.includes("#inbox/")||window.location.hash.includes("#sent/")||!!t&&!!o;return{subject:s||"No Subject",sender:c||n||"Unknown",senderName:n,body:i||"",url:window.location.href,isEmailView:l}}chrome.runtime.onMessage.addListener((t,s,e)=>{if(t.action==="GET_EMAIL_CONTEXT"){const n=d();e(n)}});
