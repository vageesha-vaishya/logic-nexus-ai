#!/usr/bin/expect -f
set timeout -1
set local_file [lindex $argv 0]
set remote_user [lindex $argv 1]
set remote_host [lindex $argv 2]
set remote_path [lindex $argv 3]
set password [lindex $argv 4]

spawn scp -o StrictHostKeyChecking=no -r $local_file $remote_user@$remote_host:$remote_path
expect {
    "password:" { send "$password\r"; exp_continue }
    eof
}
